# Swagger Ajax Client

Creates a XHR client API for [Swagger API Specification](https://github.com/wordnik/swagger-spec/blob/master/versions/1.2.md) schema (which can be generated with [fetch-swagger-schema](https://github.com/signalfuse/fetch-swagger-schema)).

## Example
```javascript
// Assuming the variable schema exists
var api = swaggerAjaxClient(schema);

function getOrCreate(id, name){
    return api.pet.getPetById(id)
        .then(function(response){
            // If there's no response code, then the pet exists
            // spec so we're all good and can return the pet.
            if(!response.code) response;

            // If we're here, that means the pet didn't exist
            // so we'll create a new one
            var pet = {id: id, name: name};
            return api.pet.addPet({id: id, name: name})
                .then(function(){
                    // If the success callback is called then
                    // we can return the pet we created.
                    return pet;
                });
            });
}

getOrCreate(2, 'bob').then(function(pet){
    console.log('Got pet:', pet);
}, function(error){
    console.error('An error occurred:', error.toString());
});
```

## API

### api = swaggerAjaxClient(schema)
* *schemaObject* - A json object describing the schema (generally generated by [fetch-swagger-schema](https://github.com/signalfuse/fetch-swagger-schema)).
* *api* - An object which can be used as the api for the given schema. The first-level objects are the resources within the schema and the second-level functions are the operations which can be performed on those resources.

### api.<resource>
A map of all the resources as defined in the schema to their operation handler (e.g. `api.pet`).

### responsePromise = api.<resource>.<operationHandler>(data, options)
This is the actual operation function to initiate a request to the API endpoint (e.g., `api.pet.getPetById`).

The operation handler takes two parameters:
* *data* - A map of the operation data parameters. If the operation only has one parameter, the value may be used directly (i.e. `api.pet.getPetById(1, callback)` is the same as `api.pet.getPetById({petId: 1}, callback)`).
* *options* - A map of the options to use when calling the operation (see below for full list).

The response promise is an ES6 promise:
```javascript

# use of .then(successHandler, failHandler)
responsePromise.then(function(response){
    console.log('successful response:', response);
}, function(error){
    console.log('request failed due to error:', error);
});
```
